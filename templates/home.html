{% extends "base.html" %}

{% block title %}Mealprint - Recipe Carbon Footprint Calculator{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto pt-10">

    <!-- Hero -->
    <div class="text-center mb-10">
        <h1 class="text-4xl md:text-5xl font-semibold text-slate-900 tracking-tight mb-3">Mealprint</h1>
        <p class="text-slate-500 text-lg">Calculate the carbon footprint of your recipes</p>
    </div>

    <!-- Import from URL Card -->
    <div class="bg-white rounded-3xl shadow-sm border border-slate-200 p-8 mb-6">
        <h2 class="text-lg font-semibold text-slate-900 tracking-tight mb-4">Import from URL</h2>
        <form method="POST" action="/scrape">
            <div class="flex gap-3">
                <input type="url" name="recipe_url" placeholder="https://recipe-website.com/..." required
                    class="flex-1 px-4 py-3 rounded-2xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none transition text-slate-700 placeholder-slate-400">
                <button type="submit" class="bg-slate-800 hover:bg-slate-900 text-white px-6 py-3 rounded-2xl text-sm font-medium transition shadow-sm flex-shrink-0">
                    Scrape
                </button>
            </div>
        </form>
    </div>

    <!-- Divider -->
    <div class="flex items-center gap-4 mb-6">
        <div class="flex-1 h-px bg-slate-200"></div>
        <span class="text-slate-400 text-sm">or enter manually</span>
        <div class="flex-1 h-px bg-slate-200"></div>
    </div>

    <!-- Manual Entry Card -->
    <div class="bg-white rounded-3xl shadow-sm border border-slate-200 p-8">
        <form method="POST" action="/summary">
            <div class="space-y-6">
                <!-- Recipe Name -->
                <div>
                    <label class="block text-sm font-medium text-slate-900 mb-2">Recipe Name</label>
                    <input type="text" name="recipe_name" value="{{ recipe_name or '' }}" required
                        class="w-full px-4 py-3 rounded-2xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none transition text-slate-700 placeholder-slate-400"
                        placeholder="e.g., Spaghetti Bolognese">
                </div>

                <!-- Servings -->
                <div>
                    <label class="block text-sm font-medium text-slate-900 mb-2">Servings</label>
                    <input type="number" name="servings" value="{{ servings or '4' }}" step="0.1" required
                        class="w-32 px-4 py-3 rounded-2xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none transition text-slate-700">
                </div>

                <!-- Ingredients -->
                <div>
                    <label class="block text-sm font-medium text-slate-900 mb-2">Ingredients</label>
                    <p class="text-slate-400 text-sm mb-2">One ingredient per line, with amounts</p>
                    <textarea name="ingredients" rows="8" required
                        class="w-full px-4 py-3 rounded-2xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none transition text-slate-700 placeholder-slate-400 resize-none"
                        placeholder="500g beef mince&#10;1 onion&#10;400g canned tomatoes&#10;2 cloves garlic">{{ ingredients or '' }}</textarea>
                </div>

                <!-- Source (optional) -->
                <div>
                    <label class="block text-sm font-medium text-slate-900 mb-2">Source <span class="text-slate-400 font-normal">(optional)</span></label>
                    <input type="text" name="source" value="{{ source or '' }}"
                        class="w-full px-4 py-3 rounded-2xl border border-slate-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-500/20 outline-none transition text-slate-700 placeholder-slate-400"
                        placeholder="URL, cookbook name, or 'Family recipe'">
                </div>

                <!-- Hidden fields for scraped data -->
                <input type="hidden" name="notes" value="{{ notes or '' }}">
                <input type="hidden" name="original_ingredients" value="{{ original_ingredients or '' }}">

                <!-- Submit -->
                <button type="submit" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white px-6 py-4 rounded-2xl text-sm font-medium transition shadow-sm">
                    Process Ingredients
                </button>
            </div>
        </form>
    </div>

    <!-- Link to history -->
    <div class="text-center mt-8">
        <a href="/history" class="text-slate-500 hover:text-emerald-600 text-sm font-medium transition">
            View saved recipes â†’
        </a>
    </div>

</div>
{% endblock %}
